import{j as T,A as g,u as S,m as C,s as L,c as n,a as t,f as U,g as A,h as D,d as a,b as u,t as i,F as m,x as y,q as x,o as r,i as P}from"./index-CckGvZ8t.js";const j=T("admin",{state:()=>({users:[],selectedUserTasks:[],allTasks:[],globalStatistics:{},pagination:{},isLoading:!1,error:null}),actions:{async fetchDashboard(){var p,d;this.isLoading=!0,this.error=null;try{const s=await g.getDashboard();this.users=s.data.users,this.globalStatistics=s.data.global_statistics,this.pagination=s.data.pagination}catch(s){this.error=((d=(p=s.response)==null?void 0:p.data)==null?void 0:d.message)||"Failed to fetch dashboard"}finally{this.isLoading=!1}},async fetchUserTasks(p){var d,s;this.isLoading=!0,this.error=null;try{const l=await g.getUserTasks(p);this.selectedUserTasks=l.data.tasks}catch(l){this.error=((s=(d=l.response)==null?void 0:d.data)==null?void 0:s.message)||"Failed to fetch user tasks"}finally{this.isLoading=!1}},async fetchAllTasks(p={}){var d,s;this.isLoading=!0,this.error=null;try{const l=await g.getAllTasks(p);this.allTasks=l.data.tasks,this.pagination=l.data.pagination}catch(l){this.error=((s=(d=l.response)==null?void 0:d.data)==null?void 0:s.message)||"Failed to fetch all tasks"}finally{this.isLoading=!1}}}}),N={class:"min-h-screen bg-gray-50"},M={class:"bg-white shadow-sm border-b border-gray-200"},B={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},F={class:"flex justify-between items-center py-4"},V={class:"flex items-center space-x-4"},$={class:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8"},z={class:"px-4 py-6 sm:px-0"},q={class:"grid grid-cols-1 md:grid-cols-6 gap-4 mb-8"},E={class:"card"},H={class:"text-center"},I={class:"text-2xl font-bold text-blue-600"},R={class:"card"},G={class:"text-center"},J={class:"text-2xl font-bold text-green-600"},K={class:"card"},O={class:"text-center"},Q={class:"text-2xl font-bold text-yellow-600"},W={class:"card"},X={class:"text-center"},Y={class:"text-2xl font-bold text-red-600"},Z={class:"card"},tt={class:"text-center"},st={class:"text-2xl font-bold text-orange-600"},et={class:"card"},at={class:"text-center"},ot={class:"text-2xl font-bold text-green-600"},it={class:"card"},nt={class:"flex justify-between items-center mb-6"},rt={class:"text-sm text-gray-500"},lt={key:0,class:"text-center py-8"},dt={key:1,class:"text-center py-8"},ct={key:2,class:"overflow-x-auto"},pt={class:"min-w-full divide-y divide-gray-200"},xt={class:"bg-white divide-y divide-gray-200"},gt={class:"px-6 py-4 whitespace-nowrap"},ut={class:"text-sm font-medium text-gray-900"},_t={class:"text-sm text-gray-500"},mt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},yt={class:"px-6 py-4 whitespace-nowrap text-sm text-green-600"},ht={class:"px-6 py-4 whitespace-nowrap text-sm text-yellow-600"},ft={class:"px-6 py-4 whitespace-nowrap"},bt={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},vt=["onClick"],wt={key:3,class:"mt-6 flex justify-between items-center"},kt={class:"text-sm text-gray-700"},Tt={class:"flex space-x-2"},St=["disabled"],Ct=["disabled"],Lt={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center p-4 z-50"},Ut={class:"bg-white rounded-lg max-w-4xl w-full max-h-[80vh] overflow-hidden"},At={class:"px-6 py-4 border-b border-gray-200"},Dt={class:"flex justify-between items-center"},Pt={class:"text-lg font-medium text-gray-900"},jt={class:"p-6 overflow-y-auto max-h-[60vh]"},Nt={key:0,class:"text-center py-8"},Mt={key:1,class:"text-center py-8"},Bt={key:2,class:"space-y-3"},Ft={class:"flex items-start justify-between"},Vt={class:"flex-1"},$t={class:"flex items-center space-x-2 mb-2"},zt={class:"text-sm font-medium text-gray-900"},qt={key:0,class:"text-sm text-gray-600 mb-2"},Et={class:"text-xs text-gray-400"},Rt={__name:"Admin",setup(p){const d=S(),s=j(),l=C(null);L(()=>{s.fetchDashboard()});const h=async c=>{l.value=c,await s.fetchUserTasks(c.id)},f=()=>{l.value=null,s.selectedUserTasks=[]},_=c=>{s.fetchDashboard({page:c})},b=c=>({low:"priority-low",medium:"priority-medium",high:"priority-high"})[c]||"bg-gray-100 text-gray-800",v=c=>({pending:"status-pending",completed:"status-completed"})[c]||"bg-gray-100 text-gray-800",w=c=>new Date(c).toLocaleDateString();return(c,e)=>{const k=D("router-link");return r(),n("div",N,[t("header",M,[t("div",B,[t("div",F,[e[4]||(e[4]=t("h1",{class:"text-2xl font-bold text-gray-900"},"Admin Dashboard",-1)),t("div",V,[U(k,{to:"/dashboard",class:"btn btn-secondary text-sm"},{default:A(()=>e[3]||(e[3]=[P(" Back to Tasks ",-1)])),_:1,__:[3]}),t("button",{onClick:e[0]||(e[0]=(...o)=>a(d).logout&&a(d).logout(...o)),class:"btn btn-secondary text-sm"}," Logout ")])])])]),t("main",$,[t("div",z,[t("div",q,[t("div",E,[t("div",H,[t("p",I,i(a(s).globalStatistics.total||0),1),e[5]||(e[5]=t("p",{class:"text-sm text-gray-600"},"Total Tasks",-1))])]),t("div",R,[t("div",G,[t("p",J,i(a(s).globalStatistics.completed||0),1),e[6]||(e[6]=t("p",{class:"text-sm text-gray-600"},"Completed",-1))])]),t("div",K,[t("div",O,[t("p",Q,i(a(s).globalStatistics.pending||0),1),e[7]||(e[7]=t("p",{class:"text-sm text-gray-600"},"Pending",-1))])]),t("div",W,[t("div",X,[t("p",Y,i(a(s).globalStatistics.high_priority||0),1),e[8]||(e[8]=t("p",{class:"text-sm text-gray-600"},"High Priority",-1))])]),t("div",Z,[t("div",tt,[t("p",st,i(a(s).globalStatistics.medium_priority||0),1),e[9]||(e[9]=t("p",{class:"text-sm text-gray-600"},"Medium Priority",-1))])]),t("div",et,[t("div",at,[t("p",ot,i(a(s).globalStatistics.low_priority||0),1),e[10]||(e[10]=t("p",{class:"text-sm text-gray-600"},"Low Priority",-1))])])]),t("div",it,[t("div",nt,[e[11]||(e[11]=t("h3",{class:"text-lg font-medium text-gray-900"},"Users & Their Tasks",-1)),t("div",rt,i(a(s).pagination.total||0)+" users total ",1)]),a(s).isLoading?(r(),n("div",lt,e[12]||(e[12]=[t("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"},null,-1),t("p",{class:"mt-2 text-gray-500"},"Loading users...",-1)]))):a(s).users.length===0?(r(),n("div",dt,e[13]||(e[13]=[t("p",{class:"text-gray-500"},"No users found.",-1)]))):(r(),n("div",ct,[t("table",pt,[e[14]||(e[14]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"User"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Total Tasks"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Completed"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Pending"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Role"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),t("tbody",xt,[(r(!0),n(m,null,y(a(s).users,o=>(r(),n("tr",{key:o.id,class:"hover:bg-gray-50"},[t("td",gt,[t("div",null,[t("div",ut,i(o.name),1),t("div",_t,i(o.email),1)])]),t("td",mt,i(o.tasks_count||0),1),t("td",yt,i(o.completed_tasks_count||0),1),t("td",ht,i(o.pending_tasks_count||0),1),t("td",ft,[t("span",{class:x(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",o.is_admin?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"])},i(o.is_admin?"Admin":"User"),3)]),t("td",bt,[t("button",{onClick:Ht=>h(o),class:"text-blue-600 hover:text-blue-900 mr-3"}," View Tasks ",8,vt)])]))),128))])])])),a(s).pagination.last_page>1?(r(),n("div",wt,[t("div",kt," Showing "+i((a(s).pagination.current_page-1)*a(s).pagination.per_page+1)+" to "+i(Math.min(a(s).pagination.current_page*a(s).pagination.per_page,a(s).pagination.total))+" of "+i(a(s).pagination.total)+" results ",1),t("div",Tt,[t("button",{onClick:e[1]||(e[1]=o=>_(a(s).pagination.current_page-1)),disabled:a(s).pagination.current_page===1,class:x(["btn btn-secondary text-sm",{"opacity-50 cursor-not-allowed":a(s).pagination.current_page===1}])}," Previous ",10,St),t("button",{onClick:e[2]||(e[2]=o=>_(a(s).pagination.current_page+1)),disabled:a(s).pagination.current_page===a(s).pagination.last_page,class:x(["btn btn-secondary text-sm",{"opacity-50 cursor-not-allowed":a(s).pagination.current_page===a(s).pagination.last_page}])}," Next ",10,Ct)])])):u("",!0)]),l.value?(r(),n("div",Lt,[t("div",Ut,[t("div",At,[t("div",Dt,[t("h3",Pt," Tasks for "+i(l.value.name),1),t("button",{onClick:f,class:"text-gray-400 hover:text-gray-600"},e[15]||(e[15]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))])]),t("div",jt,[a(s).isLoading?(r(),n("div",Nt,e[16]||(e[16]=[t("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"},null,-1),t("p",{class:"mt-2 text-gray-500"},"Loading tasks...",-1)]))):a(s).selectedUserTasks.length===0?(r(),n("div",Mt,e[17]||(e[17]=[t("p",{class:"text-gray-500"},"No tasks found for this user.",-1)]))):(r(),n("div",Bt,[(r(!0),n(m,null,y(a(s).selectedUserTasks,o=>(r(),n("div",{key:o.id,class:"bg-gray-50 border border-gray-200 rounded-lg p-4"},[t("div",Ft,[t("div",Vt,[t("div",$t,[t("h4",zt,i(o.title),1),t("span",{class:x(["inline-flex items-center px-2 py-0.5 rounded text-xs font-medium border",b(o.priority)])},i(o.priority),3),t("span",{class:x(["inline-flex items-center px-2 py-0.5 rounded text-xs font-medium",v(o.status)])},i(o.status),3)]),o.description?(r(),n("p",qt,i(o.description),1)):u("",!0),t("p",Et," Created "+i(w(o.created_at)),1)])])]))),128))]))])])])):u("",!0)])])])}}};export{Rt as default};
